CREATE TABLE film 
( 
id_film NUMERIC,
titre VARCHAR(50),
duree NUMERIC,
annee NUMERIC(4),
notes_site NUMERIC,
notes_util NUMERIC,
resume LONG,
commentaire XMLTYPE,
constraint pkf primary key (id_film)
)


create table personne
(
id_pers numeric,
nom_pers varchar(50),
prenom_pers varchar(50),
constraint pkp primary key (id_pers)
)

create table genre
(
id_genre numeric,
nom_genre varchar(25),
constraint pkg primary key (id_genre)
)

create table jouer
(
id_film numeric,
id_pers numeric,
constraint pkj primary key (id_film,id_pers),
constraint fkj1 foreign key (id_film) references film(id_film),
constraint fkj2 foreign key (id_Pers) references personne(id_pers)
)

create table realiser
(
id_film numeric,
id_pers numeric,
constraint pkr primary key (id_film,id_pers),
constraint fkr1 foreign key (id_film) references film(id_film),
constraint fkr2 foreign key (id_Pers) references personne(id_pers)
)

create table est
(
id_film numeric,
id_genre numeric,
constraint pke primary key (id_film,id_genre),
constraint fke1 foreign key (id_film) references film(id_film),
constraint fke2 foreign key (id_genre) references genre(id_genre)
)
/

INSERT INTO film
VALUES ( 0001, 'top gun', 123, 1995, 5, 4 ,'des avions et une histoire d amour',XMLType('
<film> 
    <commentaire>
	<pseudo>juju</pseudo>
	<com>super film j adore les avions !!!!</com>
	<note>6</note>
	<source>Allocine</source>
    </commentaire>
</film>'))

INSERT INTO film
VALUES ( 0002, 'slevin', 108, 2006, 8 ,6 ,'deux clan un endettés',XMLType('
<film> 
    <commentaire>
	<pseudo>bro_du_52</pseudo>
	<com>trés bon film avec M. Willis</com>
	<note>8</note>
	<source>Allocine</source>
    </commentaire>
</film>') )


insert into personne
values (0001, 'cruise', 'tom')

insert into personne
values (0002, 'eastwood','clint')

insert into personne
values (0003, 'bruce', 'willis')

insert into genre
values (0001, 'policier')

insert into genre
values (0002, 'action')


insert into est
values (0001,0002)

insert into est
values (0002,0001)

insert into jouer
values (0001,0001)

insert into jouer
values (0002,0003)


/

SELECT 
  f.commentaire.extract('/film/commentaire/com/text()').getStringVal()
FROM film f;


/***********************************************************************************/








